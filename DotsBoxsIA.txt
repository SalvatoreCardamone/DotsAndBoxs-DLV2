%ENTITA INPUT
%linea(START_X,START_Y,END_X,END_Y, TIME). 
% -Time risulta old su linee gia esistenti, new su possibili nuove linee
%punto(COORD_X,COORD_Y).



%GUESS
%DATI 2 PUNTI, DECIDO SE INSERIRE OPPURE NO UNA LINEA
linea(START_X,START_Y,END_X,END_Y, new) | nonlinea(START_X,START_Y,END_X,END_Y, new) :- punto(START_X,START_Y), punto(END_X,END_Y).

%CHECK 
%UNA LINEA NON PUO ESSERE FORMATA DALLO STESSO PUNTO
:- linea(START_X,START_Y,END_X,END_Y, new), START_X = END_X, START_Y = END_Y.

%NON POSSO INSERIRE UNA LINEA SOPRA UNA GIA ESISTENTE
:- linea(START_X,START_Y,END_X,END_Y, new), linea(END_X,END_Y,START_X,START_Y, "old").
:- linea(START_X,START_Y,END_X,END_Y, new), linea(START_X,START_Y,END_X,END_Y, "old").

%UNA LINEA NON PUO ESSERE TRA 2 PUNTI NON VICINI 
:- linea(START_X,START_Y,END_X,END_Y, new), START_X!=END_X, START_Y!=END_Y.
:- linea(START_X,START_Y,END_X,END_Y, new), START_X = END_X, START_Y - END_Y != 1, START_Y- END_Y!=-1.
:- linea(START_X,START_Y,END_X,END_Y, new), START_Y = END_Y, START_X - END_X != 1, START_X - END_X!=-1.


%WEAK CONSTRAINT
%E PREFERIBILE CHIUDERE UN QUADRATO CON UNA LINEA, SE POSSIBILE 
%:~ 

%E PREFERIBILE NON CREARE UN QUADRATO CON UN LATO APERTO CON LA PROSSIMA LINEA 
%:~


%AD OGNI TURNO DEVO INSERIRE 1 LINEA
%:- #count { new : linea(_,_,_,_,new) } < 1.
%:- #count { new : linea(_,_,_,_,new) } > 2.
%SE INSERISCO UNA LINEA, AVRA ENTRAMBE  LE COORDINATE COME PARTENZA E ARRIVO
%linea(START_X,START_Y,END_X,END_Y, TIME) :- linea(END_X,END_Y,START_X,START_Y, TIME).